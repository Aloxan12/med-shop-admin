import{c as Te,j as S,a as ht,S as Nt,s as Ut,h as Ze,g as jt,n as yt,u as Wt,r as de,b as It,d as Pt,e as qt,f as Ht,R as b,A as ye}from"./index-CutCKPoi.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["path",{d:"M10.88 21.94 15.46 14",key:"xkve6t"}],["path",{d:"M21.17 8H12",key:"19dcdn"}],["path",{d:"M3.95 6.06 8.54 14",key:"g8jz9m"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Kt=Te("chromium",$t);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Gt=Te("eye-off",zt);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Yt=Te("eye",Qt),Jt="_fromWrap_6haek_1",Xt="_actions_6haek_9",et={fromWrap:Jt,actions:Xt},Zt="_button_1hy1x_1",es="_primary_1hy1x_18",ts="_disabled_1hy1x_23",ss="_secondary_1hy1x_34",rs="_danger_1hy1x_50",is="_ghost_1hy1x_66",Ce={button:Zt,primary:es,disabled:ts,secondary:ss,danger:rs,ghost:is},Oe=({text:e,onClick:s,disabled:t,icoLeft:i,icoRight:o,variant:n="primary",fullWidth:u,...c})=>{const k=()=>{t||s?.()},p={"full-width":u,[Ce.disabled]:t};return S.jsxs("button",{disabled:t,onClick:k,className:ht(Ce.button,p,[Ce[n]]),...c,children:[i&&S.jsx(i,{size:16}),e&&S.jsx("span",{children:e}),o&&S.jsx(o,{size:16})]})};var as=class extends Nt{#t;#r=void 0;#e;#s;constructor(e,s){super(),this.#t=e,this.setOptions(s),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const s=this.options;this.options=this.#t.defaultMutationOptions(e),Ut(this.options,s)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#e,observer:this}),s?.mutationKey&&this.options.mutationKey&&Ze(s.mutationKey)!==Ze(this.options.mutationKey)?this.reset():this.#e?.state.status==="pending"&&this.#e.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#e?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#r}reset(){this.#e?.removeObserver(this),this.#e=void 0,this.#i(),this.#a()}mutate(e,s){return this.#s=s,this.#e?.removeObserver(this),this.#e=this.#t.getMutationCache().build(this.#t,this.options),this.#e.addObserver(this),this.#e.execute(e)}#i(){const e=this.#e?.state??jt();this.#r={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){yt.batch(()=>{if(this.#s&&this.hasListeners()){const s=this.#r.variables,t=this.#r.context,i={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#s.onSuccess?.(e.data,s,t,i),this.#s.onSettled?.(e.data,null,s,t,i)):e?.type==="error"&&(this.#s.onError?.(e.error,s,t,i),this.#s.onSettled?.(void 0,e.error,s,t,i))}this.listeners.forEach(s=>{s(this.#r)})})}};function ns(e,s){const t=Wt(),[i]=de.useState(()=>new as(t,e));de.useEffect(()=>{i.setOptions(e)},[i,e]);const o=de.useSyncExternalStore(de.useCallback(u=>i.subscribe(yt.batchCalls(u)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),n=de.useCallback((u,c)=>{i.mutate(u,c).catch(It)},[i]);if(o.error&&Pt(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:n,mutateAsync:o.mutate}}function os(e,s){return ns({mutationFn:e,retry:0,...s})}const ls=async e=>(await qt.post("/auth/login",e)).data,us=()=>{const e=Ht(s=>s.setToken);return os(s=>ls(s),{onSuccess:s=>{e(s.accessToken,s.refreshToken,s.user),localStorage.setItem("accessToken",s.accessToken),console.log("✅ User logged in:")},onError:s=>{console.error("❌ Login failed:",s)}})};var be=e=>e.type==="checkbox",oe=e=>e instanceof Date,q=e=>e==null;const gt=e=>typeof e=="object";var T=e=>!q(e)&&!Array.isArray(e)&&gt(e)&&!oe(e),_t=e=>T(e)&&e.target?be(e.target)?e.target.checked:e.target.value:e,cs=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,mt=(e,s)=>e.has(cs(s)),ds=e=>{const s=e.constructor&&e.constructor.prototype;return T(s)&&s.hasOwnProperty("isPrototypeOf")},Be=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function B(e){let s;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(!(Be&&(e instanceof Blob||i))&&(t||T(e)))if(s=t?[]:Object.create(Object.getPrototypeOf(e)),!t&&!ds(e))s=e;else for(const o in e)e.hasOwnProperty(o)&&(s[o]=B(e[o]));else return e;return s}var pe=e=>/^\w*$/.test(e),M=e=>e===void 0,Ne=e=>Array.isArray(e)?e.filter(Boolean):[],Ue=e=>Ne(e.replace(/["|']|\]/g,"").split(/\.|\[/)),h=(e,s,t)=>{if(!s||!T(e))return t;const i=(pe(s)?[s]:Ue(s)).reduce((o,n)=>q(o)?o:o[n],e);return M(i)||i===e?M(e[s])?t:e[s]:i},$=e=>typeof e=="boolean",D=(e,s,t)=>{let i=-1;const o=pe(s)?[s]:Ue(s),n=o.length,u=n-1;for(;++i<n;){const c=o[i];let k=t;if(i!==u){const p=e[c];k=T(p)||Array.isArray(p)?p:isNaN(+o[i+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=k,e=e[c]}};const Ve={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Q={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},te={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},bt=b.createContext(null);bt.displayName="HookFormContext";const je=()=>b.useContext(bt);var vt=(e,s,t,i=!0)=>{const o={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(o,n,{get:()=>{const u=n;return s._proxyFormState[u]!==Q.all&&(s._proxyFormState[u]=!i||Q.all),t&&(t[u]=!0),e[u]}});return o};const We=typeof window<"u"?b.useLayoutEffect:b.useEffect;function fs(e){const s=je(),{control:t=s.control,disabled:i,name:o,exact:n}=e||{},[u,c]=b.useState(t._formState),k=b.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return We(()=>t._subscribe({name:o,formState:k.current,exact:n,callback:p=>{!i&&c({...t._formState,...p})}}),[o,i,n]),b.useEffect(()=>{k.current.isValid&&t._setValid(!0)},[t]),b.useMemo(()=>vt(u,t,k.current,!1),[u,t])}var K=e=>typeof e=="string",xt=(e,s,t,i,o)=>K(e)?(i&&s.watch.add(e),h(t,e,o)):Array.isArray(e)?e.map(n=>(i&&s.watch.add(n),h(t,n))):(i&&(s.watchAll=!0),t),Re=e=>q(e)||!gt(e);function se(e,s,t=new WeakSet){if(Re(e)||Re(s))return e===s;if(oe(e)&&oe(s))return e.getTime()===s.getTime();const i=Object.keys(e),o=Object.keys(s);if(i.length!==o.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const n of i){const u=e[n];if(!o.includes(n))return!1;if(n!=="ref"){const c=s[n];if(oe(u)&&oe(c)||T(u)&&T(c)||Array.isArray(u)&&Array.isArray(c)?!se(u,c,t):u!==c)return!1}}return!0}function hs(e){const s=je(),{control:t=s.control,name:i,defaultValue:o,disabled:n,exact:u,compute:c}=e||{},k=b.useRef(o),p=b.useRef(c),_=b.useRef(void 0);p.current=c;const F=b.useMemo(()=>t._getWatch(i,k.current),[t,i]),[m,H]=b.useState(p.current?p.current(F):F);return We(()=>t._subscribe({name:i,formState:{values:!0},exact:u,callback:U=>{if(!n){const x=xt(i,t._names,U.values||t._formValues,!1,k.current);if(p.current){const j=p.current(x);se(j,_.current)||(H(j),_.current=j)}else H(x)}}}),[t,n,i,u]),b.useEffect(()=>t._removeUnmounted()),m}function ys(e){const s=je(),{name:t,disabled:i,control:o=s.control,shouldUnregister:n,defaultValue:u}=e,c=mt(o._names.array,t),k=b.useMemo(()=>h(o._formValues,t,h(o._defaultValues,t,u)),[o,t,u]),p=hs({control:o,name:t,defaultValue:k,exact:!0}),_=fs({control:o,name:t,exact:!0}),F=b.useRef(e),m=b.useRef(void 0),H=b.useRef(o.register(t,{...e.rules,value:p,...$(e.disabled)?{disabled:e.disabled}:{}}));F.current=e;const U=b.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!h(_.errors,t)},isDirty:{enumerable:!0,get:()=>!!h(_.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!h(_.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!h(_.validatingFields,t)},error:{enumerable:!0,get:()=>h(_.errors,t)}}),[_,t]),x=b.useCallback(O=>H.current.onChange({target:{value:_t(O),name:t},type:Ve.CHANGE}),[t]),j=b.useCallback(()=>H.current.onBlur({target:{value:h(o._formValues,t),name:t},type:Ve.BLUR}),[t,o._formValues]),le=b.useCallback(O=>{const N=h(o._fields,t);N&&O&&(N._f.ref={focus:()=>O.focus&&O.focus(),select:()=>O.select&&O.select(),setCustomValidity:C=>O.setCustomValidity(C),reportValidity:()=>O.reportValidity()})},[o._fields,t]),v=b.useMemo(()=>({name:t,value:p,...$(i)||_.disabled?{disabled:_.disabled||i}:{},onChange:x,onBlur:j,ref:le}),[t,i,_.disabled,x,j,le,p]);return b.useEffect(()=>{const O=o._options.shouldUnregister||n,N=m.current;N&&N!==t&&!c&&o.unregister(N),o.register(t,{...F.current.rules,...$(F.current.disabled)?{disabled:F.current.disabled}:{}});const C=(ee,J)=>{const ie=h(o._fields,ee);ie&&ie._f&&(ie._f.mount=J)};if(C(t,!0),O){const ee=B(h(o._options.defaultValues,t,F.current.defaultValue));D(o._defaultValues,t,ee),M(h(o._formValues,t))&&D(o._formValues,t,ee)}return!c&&o.register(t),m.current=t,()=>{(c?O&&!o._state.action:O)?o.unregister(t):C(t,!1)}},[t,o,c,n]),b.useEffect(()=>{o._setDisabledField({disabled:i,name:t})},[i,t,o]),b.useMemo(()=>({field:v,formState:_,fieldState:U}),[v,_,U])}const gs=e=>e.render(ys(e));var _s=(e,s,t,i,o)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:o||!0}}:{},_e=e=>Array.isArray(e)?e:[e],tt=()=>{let e=[];return{get observers(){return e},next:o=>{for(const n of e)n.next&&n.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(n=>n!==o)}}),unsubscribe:()=>{e=[]}}};function Vt(e,s){const t={};for(const i in e)if(e.hasOwnProperty(i)){const o=e[i],n=s[i];if(o&&T(o)&&n){const u=Vt(o,n);T(u)&&(t[i]=u)}else e[i]&&(t[i]=n)}return t}var P=e=>T(e)&&!Object.keys(e).length,Ie=e=>e.type==="file",Y=e=>typeof e=="function",Fe=e=>{if(!Be)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Ft=e=>e.type==="select-multiple",Pe=e=>e.type==="radio",ms=e=>Pe(e)||be(e),Me=e=>Fe(e)&&e.isConnected;function bs(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=M(e)?i++:e[s[i++]];return e}function vs(e){for(const s in e)if(e.hasOwnProperty(s)&&!M(e[s]))return!1;return!0}function L(e,s){const t=Array.isArray(s)?s:pe(s)?[s]:Ue(s),i=t.length===1?e:bs(e,t),o=t.length-1,n=t[o];return i&&delete i[n],o!==0&&(T(i)&&P(i)||Array.isArray(i)&&vs(i))&&L(e,t.slice(0,-1)),e}var xs=e=>{for(const s in e)if(Y(e[s]))return!0;return!1};function kt(e){return Array.isArray(e)||T(e)&&!xs(e)}function Le(e,s={}){for(const t in e)kt(e[t])?(s[t]=Array.isArray(e[t])?[]:{},Le(e[t],s[t])):M(e[t])||(s[t]=!0);return s}function fe(e,s,t){t||(t=Le(s));for(const i in e)kt(e[i])?M(s)||Re(t[i])?t[i]=Le(e[i],Array.isArray(e[i])?[]:{}):fe(e[i],q(s)?{}:s[i],t[i]):t[i]=!se(e[i],s[i]);return t}const st={value:!1,isValid:!1},rt={value:!0,isValid:!0};var pt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!M(e[0].attributes.value)?M(e[0].value)||e[0].value===""?rt:{value:e[0].value,isValid:!0}:rt:st}return st},wt=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>M(e)?e:s?e===""?NaN:e&&+e:t&&K(e)?new Date(e):i?i(e):e;const it={isValid:!1,value:null};var At=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,it):it;function at(e){const s=e.ref;return Ie(s)?s.files:Pe(s)?At(e.refs).value:Ft(s)?[...s.selectedOptions].map(({value:t})=>t):be(s)?pt(e.refs).value:wt(M(s.value)?e.ref.value:s.value,e)}var Vs=(e,s,t,i)=>{const o={};for(const n of e){const u=h(s,n);u&&D(o,n,u._f)}return{criteriaMode:t,names:[...e],fields:o,shouldUseNativeValidation:i}},ke=e=>e instanceof RegExp,ge=e=>M(e)?e:ke(e)?e.source:T(e)?ke(e.value)?e.value.source:e.value:e,nt=e=>({isOnSubmit:!e||e===Q.onSubmit,isOnBlur:e===Q.onBlur,isOnChange:e===Q.onChange,isOnAll:e===Q.all,isOnTouch:e===Q.onTouched});const ot="AsyncFunction";var Fs=e=>!!e&&!!e.validate&&!!(Y(e.validate)&&e.validate.constructor.name===ot||T(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===ot)),ks=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),lt=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const me=(e,s,t,i)=>{for(const o of t||Object.keys(e)){const n=h(e,o);if(n){const{_f:u,...c}=n;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],o)&&!i)return!0;if(u.ref&&s(u.ref,u.name)&&!i)return!0;if(me(c,s))break}else if(T(c)&&me(c,s))break}}};function ut(e,s,t){const i=h(e,t);if(i||pe(t))return{error:i,name:t};const o=t.split(".");for(;o.length;){const n=o.join("."),u=h(s,n),c=h(e,n);if(u&&!Array.isArray(u)&&t!==n)return{name:t};if(c&&c.type)return{name:n,error:c};if(c&&c.root&&c.root.type)return{name:`${n}.root`,error:c.root};o.pop()}return{name:t}}var ps=(e,s,t,i)=>{t(e);const{name:o,...n}=e;return P(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(u=>s[u]===(!i||Q.all))},ws=(e,s,t)=>!e||!s||e===s||_e(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i))),As=(e,s,t,i,o)=>o.isOnAll?!1:!t&&o.isOnTouch?!(s||e):(t?i.isOnBlur:o.isOnBlur)?!e:(t?i.isOnChange:o.isOnChange)?e:!0,Ss=(e,s)=>!Ne(h(e,s)).length&&L(e,s),Es=(e,s,t)=>{const i=_e(h(e,t));return D(i,"root",s[t]),D(e,t,i),e};function ct(e,s,t="validate"){if(K(e)||Array.isArray(e)&&e.every(K)||$(e)&&!e)return{type:t,message:K(e)?e:"",ref:s}}var ce=e=>T(e)&&!ke(e)?e:{value:e,message:""},dt=async(e,s,t,i,o,n)=>{const{ref:u,refs:c,required:k,maxLength:p,minLength:_,min:F,max:m,pattern:H,validate:U,name:x,valueAsNumber:j,mount:le}=e._f,v=h(t,x);if(!le||s.has(x))return{};const O=c?c[0]:u,N=V=>{o&&O.reportValidity&&(O.setCustomValidity($(V)?"":V||""),O.reportValidity())},C={},ee=Pe(u),J=be(u),ie=ee||J,G=(j||Ie(u))&&M(u.value)&&M(v)||Fe(u)&&u.value===""||v===""||Array.isArray(v)&&!v.length,ae=_s.bind(null,x,i,C),X=(V,A,R,W=te.maxLength,I=te.minLength)=>{const Z=V?A:R;C[x]={type:V?W:I,message:Z,ref:u,...ae(V?W:I,Z)}};if(n?!Array.isArray(v)||!v.length:k&&(!ie&&(G||q(v))||$(v)&&!v||J&&!pt(c).isValid||ee&&!At(c).isValid)){const{value:V,message:A}=K(k)?{value:!!k,message:k}:ce(k);if(V&&(C[x]={type:te.required,message:A,ref:O,...ae(te.required,A)},!i))return N(A),C}if(!G&&(!q(F)||!q(m))){let V,A;const R=ce(m),W=ce(F);if(!q(v)&&!isNaN(v)){const I=u.valueAsNumber||v&&+v;q(R.value)||(V=I>R.value),q(W.value)||(A=I<W.value)}else{const I=u.valueAsDate||new Date(v),Z=ve=>new Date(new Date().toDateString()+" "+ve),he=u.type=="time",ue=u.type=="week";K(R.value)&&v&&(V=he?Z(v)>Z(R.value):ue?v>R.value:I>new Date(R.value)),K(W.value)&&v&&(A=he?Z(v)<Z(W.value):ue?v<W.value:I<new Date(W.value))}if((V||A)&&(X(!!V,R.message,W.message,te.max,te.min),!i))return N(C[x].message),C}if((p||_)&&!G&&(K(v)||n&&Array.isArray(v))){const V=ce(p),A=ce(_),R=!q(V.value)&&v.length>+V.value,W=!q(A.value)&&v.length<+A.value;if((R||W)&&(X(R,V.message,A.message),!i))return N(C[x].message),C}if(H&&!G&&K(v)){const{value:V,message:A}=ce(H);if(ke(V)&&!v.match(V)&&(C[x]={type:te.pattern,message:A,ref:u,...ae(te.pattern,A)},!i))return N(A),C}if(U){if(Y(U)){const V=await U(v,t),A=ct(V,O);if(A&&(C[x]={...A,...ae(te.validate,A.message)},!i))return N(A.message),C}else if(T(U)){let V={};for(const A in U){if(!P(V)&&!i)break;const R=ct(await U[A](v,t),O,A);R&&(V={...R,...ae(A,R.message)},N(R.message),i&&(C[x]=V))}if(!P(V)&&(C[x]={ref:O,...V},!i))return C}}return N(!0),C};const Ds={mode:Q.onSubmit,reValidateMode:Q.onChange,shouldFocusError:!0};function Cs(e={}){let s={...Ds,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Y(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},o=T(s.defaultValues)||T(s.values)?B(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:B(o),u={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},k,p=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let F={..._};const m={array:tt(),state:tt()},H=s.criteriaMode===Q.all,U=r=>a=>{clearTimeout(p),p=setTimeout(r,a)},x=async r=>{if(!s.disabled&&(_.isValid||F.isValid||r)){const a=s.resolver?P((await J()).errors):await G(i,!0);a!==t.isValid&&m.state.next({isValid:a})}},j=(r,a)=>{!s.disabled&&(_.isValidating||_.validatingFields||F.isValidating||F.validatingFields)&&((r||Array.from(c.mount)).forEach(l=>{l&&(a?D(t.validatingFields,l,a):L(t.validatingFields,l))}),m.state.next({validatingFields:t.validatingFields,isValidating:!P(t.validatingFields)}))},le=(r,a=[],l,y,f=!0,d=!0)=>{if(y&&l&&!s.disabled){if(u.action=!0,d&&Array.isArray(h(i,r))){const g=l(h(i,r),y.argA,y.argB);f&&D(i,r,g)}if(d&&Array.isArray(h(t.errors,r))){const g=l(h(t.errors,r),y.argA,y.argB);f&&D(t.errors,r,g),Ss(t.errors,r)}if((_.touchedFields||F.touchedFields)&&d&&Array.isArray(h(t.touchedFields,r))){const g=l(h(t.touchedFields,r),y.argA,y.argB);f&&D(t.touchedFields,r,g)}(_.dirtyFields||F.dirtyFields)&&(t.dirtyFields=fe(o,n)),m.state.next({name:r,isDirty:X(r,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else D(n,r,a)},v=(r,a)=>{D(t.errors,r,a),m.state.next({errors:t.errors})},O=r=>{t.errors=r,m.state.next({errors:t.errors,isValid:!1})},N=(r,a,l,y)=>{const f=h(i,r);if(f){const d=h(n,r,M(l)?h(o,r):l);M(d)||y&&y.defaultChecked||a?D(n,r,a?d:at(f._f)):R(r,d),u.mount&&x()}},C=(r,a,l,y,f)=>{let d=!1,g=!1;const w={name:r};if(!s.disabled){if(!l||y){(_.isDirty||F.isDirty)&&(g=t.isDirty,t.isDirty=w.isDirty=X(),d=g!==w.isDirty);const E=se(h(o,r),a);g=!!h(t.dirtyFields,r),E?L(t.dirtyFields,r):D(t.dirtyFields,r,!0),w.dirtyFields=t.dirtyFields,d=d||(_.dirtyFields||F.dirtyFields)&&g!==!E}if(l){const E=h(t.touchedFields,r);E||(D(t.touchedFields,r,l),w.touchedFields=t.touchedFields,d=d||(_.touchedFields||F.touchedFields)&&E!==l)}d&&f&&m.state.next(w)}return d?w:{}},ee=(r,a,l,y)=>{const f=h(t.errors,r),d=(_.isValid||F.isValid)&&$(a)&&t.isValid!==a;if(s.delayError&&l?(k=U(()=>v(r,l)),k(s.delayError)):(clearTimeout(p),k=null,l?D(t.errors,r,l):L(t.errors,r)),(l?!se(f,l):f)||!P(y)||d){const g={...y,...d&&$(a)?{isValid:a}:{},errors:t.errors,name:r};t={...t,...g},m.state.next(g)}},J=async r=>{j(r,!0);const a=await s.resolver(n,s.context,Vs(r||c.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return j(r),a},ie=async r=>{const{errors:a}=await J(r);if(r)for(const l of r){const y=h(a,l);y?D(t.errors,l,y):L(t.errors,l)}else t.errors=a;return a},G=async(r,a,l={valid:!0})=>{for(const y in r){const f=r[y];if(f){const{_f:d,...g}=f;if(d){const w=c.array.has(d.name),E=f._f&&Fs(f._f);E&&_.validatingFields&&j([d.name],!0);const z=await dt(f,c.disabled,n,H,s.shouldUseNativeValidation&&!a,w);if(E&&_.validatingFields&&j([d.name]),z[d.name]&&(l.valid=!1,a))break;!a&&(h(z,d.name)?w?Es(t.errors,z,d.name):D(t.errors,d.name,z[d.name]):L(t.errors,d.name))}!P(g)&&await G(g,a,l)}}return l.valid},ae=()=>{for(const r of c.unMount){const a=h(i,r);a&&(a._f.refs?a._f.refs.every(l=>!Me(l)):!Me(a._f.ref))&&we(r)}c.unMount=new Set},X=(r,a)=>!s.disabled&&(r&&a&&D(n,r,a),!se(ve(),o)),V=(r,a,l)=>xt(r,c,{...u.mount?n:M(a)?o:K(r)?{[r]:a}:a},l,a),A=r=>Ne(h(u.mount?n:o,r,s.shouldUnregister?h(o,r,[]):[])),R=(r,a,l={})=>{const y=h(i,r);let f=a;if(y){const d=y._f;d&&(!d.disabled&&D(n,r,wt(a,d)),f=Fe(d.ref)&&q(a)?"":a,Ft(d.ref)?[...d.ref.options].forEach(g=>g.selected=f.includes(g.value)):d.refs?be(d.ref)?d.refs.forEach(g=>{(!g.defaultChecked||!g.disabled)&&(Array.isArray(f)?g.checked=!!f.find(w=>w===g.value):g.checked=f===g.value||!!f)}):d.refs.forEach(g=>g.checked=g.value===f):Ie(d.ref)?d.ref.value="":(d.ref.value=f,d.ref.type||m.state.next({name:r,values:B(n)})))}(l.shouldDirty||l.shouldTouch)&&C(r,f,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&ue(r)},W=(r,a,l)=>{for(const y in a){if(!a.hasOwnProperty(y))return;const f=a[y],d=r+"."+y,g=h(i,d);(c.array.has(r)||T(f)||g&&!g._f)&&!oe(f)?W(d,f,l):R(d,f,l)}},I=(r,a,l={})=>{const y=h(i,r),f=c.array.has(r),d=B(a);D(n,r,d),f?(m.array.next({name:r,values:B(n)}),(_.isDirty||_.dirtyFields||F.isDirty||F.dirtyFields)&&l.shouldDirty&&m.state.next({name:r,dirtyFields:fe(o,n),isDirty:X(r,d)})):y&&!y._f&&!q(d)?W(r,d,l):R(r,d,l),lt(r,c)&&m.state.next({...t,name:r}),m.state.next({name:u.mount?r:void 0,values:B(n)})},Z=async r=>{u.mount=!0;const a=r.target;let l=a.name,y=!0;const f=h(i,l),d=E=>{y=Number.isNaN(E)||oe(E)&&isNaN(E.getTime())||se(E,h(n,l,E))},g=nt(s.mode),w=nt(s.reValidateMode);if(f){let E,z;const xe=a.type?at(f._f):_t(r),re=r.type===Ve.BLUR||r.type===Ve.FOCUS_OUT,Lt=!ks(f._f)&&!s.resolver&&!h(t.errors,l)&&!f._f.deps||As(re,h(t.touchedFields,l),t.isSubmitted,w,g),Ee=lt(l,c,re);D(n,l,xe),re?(!a||!a.readOnly)&&(f._f.onBlur&&f._f.onBlur(r),k&&k(0)):f._f.onChange&&f._f.onChange(r);const De=C(l,xe,re),Tt=!P(De)||Ee;if(!re&&m.state.next({name:l,type:r.type,values:B(n)}),Lt)return(_.isValid||F.isValid)&&(s.mode==="onBlur"?re&&x():re||x()),Tt&&m.state.next({name:l,...Ee?{}:De});if(!re&&Ee&&m.state.next({...t}),s.resolver){const{errors:Je}=await J([l]);if(d(xe),y){const Bt=ut(t.errors,i,l),Xe=ut(Je,i,Bt.name||l);E=Xe.error,l=Xe.name,z=P(Je)}}else j([l],!0),E=(await dt(f,c.disabled,n,H,s.shouldUseNativeValidation))[l],j([l]),d(xe),y&&(E?z=!1:(_.isValid||F.isValid)&&(z=await G(i,!0)));y&&(f._f.deps&&(!Array.isArray(f._f.deps)||f._f.deps.length>0)&&ue(f._f.deps),ee(l,z,E,De))}},he=(r,a)=>{if(h(t.errors,a)&&r.focus)return r.focus(),1},ue=async(r,a={})=>{let l,y;const f=_e(r);if(s.resolver){const d=await ie(M(r)?r:f);l=P(d),y=r?!f.some(g=>h(d,g)):l}else r?(y=(await Promise.all(f.map(async d=>{const g=h(i,d);return await G(g&&g._f?{[d]:g}:g)}))).every(Boolean),!(!y&&!t.isValid)&&x()):y=l=await G(i);return m.state.next({...!K(r)||(_.isValid||F.isValid)&&l!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:l}:{},errors:t.errors}),a.shouldFocus&&!y&&me(i,he,r?f:c.mount),y},ve=(r,a)=>{let l={...u.mount?n:o};return a&&(l=Vt(a.dirtyFields?t.dirtyFields:t.touchedFields,l)),M(r)?l:K(r)?h(l,r):r.map(y=>h(l,y))},qe=(r,a)=>({invalid:!!h((a||t).errors,r),isDirty:!!h((a||t).dirtyFields,r),error:h((a||t).errors,r),isValidating:!!h(t.validatingFields,r),isTouched:!!h((a||t).touchedFields,r)}),St=r=>{r&&_e(r).forEach(a=>L(t.errors,a)),m.state.next({errors:r?t.errors:{}})},He=(r,a,l)=>{const y=(h(i,r,{_f:{}})._f||{}).ref,f=h(t.errors,r)||{},{ref:d,message:g,type:w,...E}=f;D(t.errors,r,{...E,...a,ref:y}),m.state.next({name:r,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&y&&y.focus&&y.focus()},Et=(r,a)=>Y(r)?m.state.subscribe({next:l=>"values"in l&&r(V(void 0,a),l)}):V(r,a,!0),$e=r=>m.state.subscribe({next:a=>{ws(r.name,a.name,r.exact)&&ps(a,r.formState||_,Rt,r.reRenderRoot)&&r.callback({values:{...n},...t,...a,defaultValues:o})}}).unsubscribe,Dt=r=>(u.mount=!0,F={...F,...r.formState},$e({...r,formState:F})),we=(r,a={})=>{for(const l of r?_e(r):c.mount)c.mount.delete(l),c.array.delete(l),a.keepValue||(L(i,l),L(n,l)),!a.keepError&&L(t.errors,l),!a.keepDirty&&L(t.dirtyFields,l),!a.keepTouched&&L(t.touchedFields,l),!a.keepIsValidating&&L(t.validatingFields,l),!s.shouldUnregister&&!a.keepDefaultValue&&L(o,l);m.state.next({values:B(n)}),m.state.next({...t,...a.keepDirty?{isDirty:X()}:{}}),!a.keepIsValid&&x()},Ke=({disabled:r,name:a})=>{($(r)&&u.mount||r||c.disabled.has(a))&&(r?c.disabled.add(a):c.disabled.delete(a))},Ae=(r,a={})=>{let l=h(i,r);const y=$(a.disabled)||$(s.disabled);return D(i,r,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:r}},name:r,mount:!0,...a}}),c.mount.add(r),l?Ke({disabled:$(a.disabled)?a.disabled:s.disabled,name:r}):N(r,!0,a.value),{...y?{disabled:a.disabled||s.disabled}:{},...s.progressive?{required:!!a.required,min:ge(a.min),max:ge(a.max),minLength:ge(a.minLength),maxLength:ge(a.maxLength),pattern:ge(a.pattern)}:{},name:r,onChange:Z,onBlur:Z,ref:f=>{if(f){Ae(r,a),l=h(i,r);const d=M(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,g=ms(d),w=l._f.refs||[];if(g?w.find(E=>E===d):d===l._f.ref)return;D(i,r,{_f:{...l._f,...g?{refs:[...w.filter(Me),d,...Array.isArray(h(o,r))?[{}]:[]],ref:{type:d.type,name:r}}:{ref:d}}}),N(r,!1,void 0,d)}else l=h(i,r,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(mt(c.array,r)&&u.action)&&c.unMount.add(r)}}},Se=()=>s.shouldFocusError&&me(i,he,c.mount),Ct=r=>{$(r)&&(m.state.next({disabled:r}),me(i,(a,l)=>{const y=h(i,l);y&&(a.disabled=y._f.disabled||r,Array.isArray(y._f.refs)&&y._f.refs.forEach(f=>{f.disabled=y._f.disabled||r}))},0,!1))},ze=(r,a)=>async l=>{let y;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let f=B(n);if(m.state.next({isSubmitting:!0}),s.resolver){const{errors:d,values:g}=await J();t.errors=d,f=B(g)}else await G(i);if(c.disabled.size)for(const d of c.disabled)L(f,d);if(L(t.errors,"root"),P(t.errors)){m.state.next({errors:{}});try{await r(f,l)}catch(d){y=d}}else a&&await a({...t.errors},l),Se(),setTimeout(Se);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:P(t.errors)&&!y,submitCount:t.submitCount+1,errors:t.errors}),y)throw y},Ot=(r,a={})=>{h(i,r)&&(M(a.defaultValue)?I(r,B(h(o,r))):(I(r,a.defaultValue),D(o,r,B(a.defaultValue))),a.keepTouched||L(t.touchedFields,r),a.keepDirty||(L(t.dirtyFields,r),t.isDirty=a.defaultValue?X(r,B(h(o,r))):X()),a.keepError||(L(t.errors,r),_.isValid&&x()),m.state.next({...t}))},Ge=(r,a={})=>{const l=r?B(r):o,y=B(l),f=P(r),d=f?o:y;if(a.keepDefaultValues||(o=l),!a.keepValues){if(a.keepDirtyValues){const g=new Set([...c.mount,...Object.keys(fe(o,n))]);for(const w of Array.from(g))h(t.dirtyFields,w)?D(d,w,h(n,w)):I(w,h(d,w))}else{if(Be&&M(r))for(const g of c.mount){const w=h(i,g);if(w&&w._f){const E=Array.isArray(w._f.refs)?w._f.refs[0]:w._f.ref;if(Fe(E)){const z=E.closest("form");if(z){z.reset();break}}}}if(a.keepFieldsRef)for(const g of c.mount)I(g,h(d,g));else i={}}n=s.shouldUnregister?a.keepDefaultValues?B(o):{}:B(d),m.array.next({values:{...d}}),m.state.next({values:{...d}})}c={mount:a.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!_.isValid||!!a.keepIsValid||!!a.keepDirtyValues,u.watch=!!s.shouldUnregister,m.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:f?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!se(r,o)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:a.keepDirtyValues?a.keepDefaultValues&&n?fe(o,n):t.dirtyFields:a.keepDefaultValues&&r?fe(o,r):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},Qe=(r,a)=>Ge(Y(r)?r(n):r,a),Mt=(r,a={})=>{const l=h(i,r),y=l&&l._f;if(y){const f=y.refs?y.refs[0]:y.ref;f.focus&&(f.focus(),a.shouldSelect&&Y(f.select)&&f.select())}},Rt=r=>{t={...t,...r}},Ye={control:{register:Ae,unregister:we,getFieldState:qe,handleSubmit:ze,setError:He,_subscribe:$e,_runSchema:J,_focusError:Se,_getWatch:V,_getDirty:X,_setValid:x,_setFieldArray:le,_setDisabledField:Ke,_setErrors:O,_getFieldArray:A,_reset:Ge,_resetDefaultValues:()=>Y(s.defaultValues)&&s.defaultValues().then(r=>{Qe(r,s.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:ae,_disableForm:Ct,_subjects:m,_proxyFormState:_,get _fields(){return i},get _formValues(){return n},get _state(){return u},set _state(r){u=r},get _defaultValues(){return o},get _names(){return c},set _names(r){c=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:Dt,trigger:ue,register:Ae,handleSubmit:ze,watch:Et,setValue:I,getValues:ve,reset:Qe,resetField:Ot,clearErrors:St,unregister:we,setError:He,setFocus:Mt,getFieldState:qe};return{...Ye,formControl:Ye}}function Os(e={}){const s=b.useRef(void 0),t=b.useRef(void 0),[i,o]=b.useState({isDirty:!1,isValidating:!1,isLoading:Y(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Y(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:i},e.defaultValues&&!Y(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...c}=Cs(e);s.current={...c,formState:i}}const n=s.current.control;return n._options=e,We(()=>{const u=n._subscribe({formState:n._proxyFormState,callback:()=>o({...n._formState}),reRenderRoot:!0});return o(c=>({...c,isReady:!0})),n._formState.isReady=!0,u},[n]),b.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),b.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),b.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),b.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),b.useEffect(()=>{if(n._proxyFormState.isDirty){const u=n._getDirty();u!==i.isDirty&&n._subjects.state.next({isDirty:u})}},[n,i.isDirty]),b.useEffect(()=>{e.values&&!se(e.values,t.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),t.current=e.values,o(u=>({...u}))):n._resetDefaultValues()},[n,e.values]),b.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),s.current.formState=vt(i,n),s.current}const Ms="_inputWrap_1k0xn_1",Rs="_inputBlock_1k0xn_8",Ls="_inputBase_1k0xn_15",Ts="_iconButton_1k0xn_24",Bs="_error_1k0xn_30",Ns="_label_1k0xn_33",Us="_errorBlock_1k0xn_37",ne={inputWrap:Ms,inputBlock:Rs,inputBase:Ls,iconButton:Ts,error:Bs,label:Ns,errorBlock:Us},js=(e,s)=>{let t,i,o,n,u,c;switch(s){case"float":i=e.replace(/[,]+/g,".").replace(/^\.+/g,"").replace(/^(0)([0-9])+/g,"$2").match(/(^[0-9]*(\.)?[0-9]{0,9})*/g),t=i?i[0]:"";break;case"integer":o=e.replace(/\D/g,"").replace(/^(0)([0-9])+/g,"$2"),t=o;break;case"negativeInteger":n=e.length>1&&e[0]==="-"?-1:1,u=e==="-",c=e.replace(/\D/g,"").replace(/^(0)([0-9])+/g,"$2"),t=u?"-":c?`${Number(c)*n}`:"";break;default:t=e}return t},Ws=({value:e,placeholder:s,label:t,fullWidth:i,onChange:o,type:n,mask:u,error:c,...k})=>{const[p,_]=de.useState(!1),F=()=>_(x=>!x),m=x=>{if(n==="date"){if(x.target.value.length>10)return;o?.(x.target.value);return}if(u){o?.(js(x.target.value,u));return}o?.(x.currentTarget.value)},H={"full-width":!!i,[ne.error]:!!c},U=n==="password"&&p?"text":n;return S.jsxs("div",{className:ht(ne.inputWrap,H),children:[!!t&&S.jsx("label",{className:ne.label,children:t}),S.jsxs("div",{className:ne.inputBlock,children:[S.jsx("input",{value:e||"",type:U,placeholder:s,onChange:m,...k,className:ne.inputBase}),n==="password"&&S.jsx("div",{className:ne.iconButton,onClick:F,children:p?S.jsx(Gt,{}):S.jsx(Yt,{})})]}),c&&S.jsx("div",{className:ne.errorBlock,children:c})]})},ft=({name:e,control:s,label:t,type:i,mask:o,fullWidth:n,placeholder:u,rules:c})=>S.jsx(gs,{name:e,control:s,rules:c,render:({field:k,fieldState:p})=>S.jsx(S.Fragment,{children:S.jsx(Ws,{...k,type:i,mask:o,label:t,fullWidth:n,placeholder:u,onChange:_=>k.onChange(_),error:p?.error?.message||""})})}),Is={required:"Email обязателен",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Неверный формат"}},Ps={required:"Пароль обязателен",minLength:{value:5,message:"Минимум 5 символов"}},qs={email:"",password:""},Hs=()=>{const{handleSubmit:e,control:s}=Os({defaultValues:qs}),{mutate:t}=us(),i=e(n=>t(n)),o=()=>window.location.href="undefined/auth/google";return S.jsx(ye,{fullWidth:!0,fullHeight:!0,align:"center",justify:"center",className:"page",children:S.jsxs(ye,{fullWidth:!0,direction:"column",gap:"20",className:et.fromWrap,children:[S.jsxs(ye,{fullWidth:!0,direction:"column",gap:"24",children:[S.jsx(ft,{control:s,name:"email",label:"Email",placeholder:"Введите E-mail",rules:Is,fullWidth:!0}),S.jsx(ft,{rules:Ps,control:s,name:"password",label:"Пароль",placeholder:"Введите пароль",fullWidth:!0,type:"password"})]}),S.jsxs(ye,{gap:"20",fullWidth:!0,className:et.actions,children:[S.jsx(Oe,{text:"Зарегистрироваться",variant:"secondary",fullWidth:!0}),S.jsx(Oe,{text:"Войти",onClick:i,fullWidth:!0})]}),S.jsx(ye,{gap:"20",fullWidth:!0,children:S.jsx(Oe,{icoLeft:Kt,text:"Войти через google",onClick:o,variant:"ghost",fullWidth:!0})})]})})},zs=()=>S.jsx("div",{children:S.jsx(Hs,{})});export{zs as default};
